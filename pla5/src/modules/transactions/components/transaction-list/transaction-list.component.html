<p *ngIf="!transactions"><em>Loading...</em></p>
<div class="captionlike">Transactions</div>
<div class="scrollContainer">
    <div *ngIf="transactions && payees && categories && accounts" class="tablecontainer">
        <div class="tablehead">
            <div class="w80">Flags</div>
            <div class="w30">Re</div>
            <div class="w90">Date</div>
            <div class="w50">Check</div>
            <div class="w120">To</div>
            <div class="w120">From</div>
            <div class="w80">Amount</div>
            <div class="w160">Category</div>
            <div class="w40">Tax?</div>
            <div class="w200">Comment</div>
            <div class="w120">&nbsp;</div>
            <div *ngFor="let account of accounts" class="w90">{{account.name}}</div>
            <div class="w80">Assets</div>
            <div class="w80">Liabilities</div>
            <div class="w80">Net</div>
        </div>
        <div class="tablebody">
            <div *ngFor="let transaction of transactions; let tidx = index" class="tablerow">
                <div class="w80">
                    <a *ngIf="transaction.flag0" class="toggler flag0-true" (click)="onFlag0Toggle(transaction.id)">&#9873;</a>
                    <a *ngIf="!transaction.flag0" class="toggler flag0-false" (click)="onFlag0Toggle(transaction.id)">&#9872;</a>
                    <a *ngIf="transaction.flag1" class="toggler flag1-true" (click)="onFlag1Toggle(transaction.id)">&#9873;</a>
                    <a *ngIf="!transaction.flag1" class="toggler flag1-false" (click)="onFlag1Toggle(transaction.id)">&#9872;</a>
                    <a *ngIf="transaction.flag2" class="toggler flag2-true" (click)="onFlag2Toggle(transaction.id)">&#9873;</a>
                    <a *ngIf="!transaction.flag2" class="toggler flag2-false" (click)="onFlag2Toggle(transaction.id)">&#9872;</a>
                    <a *ngIf="transaction.flag3" class="toggler flag3-true" (click)="onFlag3Toggle(transaction.id)">&#9873;</a>
                    <a *ngIf="!transaction.flag3" class="toggler flag3-false" (click)="onFlag3Toggle(transaction.id)">&#9872;</a>
                </div>
                <div class="w30">
                    <a *ngIf="transaction.reconciled" class="toggler reconciled" (click)="onReconciledToggle(transaction.id)">&#10004;</a>
                    <button *ngIf="!transaction.reconciled" class="btn-clear reconciled" (click)="onReconciledToggle(transaction.id)">&nbsp;</button>
                </div>
                <div class="w90">{{transaction.date | date}}</div>
                <div class="w50">{{transaction.check}}</div>

                <div *ngIf="transaction.payeeTo" class="w120">{{transaction.payeeTo}}</div>
                <div *ngIf="transaction.acctTo" class="account-name w120">{{accountName(transaction.acctTo)}}</div>
                <div *ngIf="!transaction.payeeTo && !transaction.acctTo" class="w120">&nbsp;</div>

                <div *ngIf="transaction.payeeFrom" class="w120">{{transaction.payeeFrom}}</div>
                <div *ngIf="transaction.acctFrom" class="account-name w120">{{accountName(transaction.acctFrom)}}</div>
                <div *ngIf="!transaction.payeeFrom && !transaction.acctFrom" class="w120">&nbsp;</div>

                <div class='money w80'>{{displayAsDollar(transaction.amount)}}</div>
                <div class="w160">{{categoryName(transaction.category)}}</div>
                <div class="w40">&nbsp;<span *ngIf="transaction.tax" class='glyphicon glyphicon-copy' style='color:green;'></span></div>
                <div class="commentcell w200">{{transaction.comments}}</div>
                <div class="actionCell w60"><a class="btn btn-xs editlink" routerLink="./transaction-edit/{{transaction.id}}">Edit</a></div>
                <div class="actionCell w60"><a class="btn btn-xs deletelink" (click)="onDelete(transaction.id);">Delete</a></div>
                <div *ngFor="let account of accounts; let aidx = index" class="money balanceCell w90">{{displayAsDollar(balances[tidx][aidx])}}</div>
                <div class="money balanceCell w80">{{displayAsDollar(assets[tidx])}}</div>
                <div class="money balanceCell w80">{{displayAsDollar(liabilities[tidx])}}</div>
                <div class="money balanceCell w80">{{displayAsDollar(nets[tidx])}}</div>
            </div>
        </div>
    </div>
</div>
<a id="addlink" routerLink="./transaction-add">Add New Transaction</a>
<router-outlet></router-outlet>
